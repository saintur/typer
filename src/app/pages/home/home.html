<div class="main-content">

  <app-header/>
  <main>
    <div class="wrapped-section">
      <section class="first">
        <div>
          <label>‚Ä¢ –•–∏—á—ç—ç–ª</label>
          <h1>10 —Ö—É—Ä—É—É–≥–∞–∞—Ä —Ö—É—Ä–¥–∞–Ω –±–∏—á–∏—Ö —Ö–∏—á—ç—ç–ª</h1>
        </div>

        <div class="b-actions">
          <p-button label="üá≤üá≥ –ú–æ–Ω–≥–æ–ª" severity="contrast" class="{{selectedLanguage === 'mn' ? 'selected-lang' : 'inactive-lang'}}" [rounded]="true"/>
          <p-button label="üá¨üáß English" severity="contrast" class="{{selectedLanguage === 'en' ? 'selected-lang' : 'inactive-lang'}}"  [rounded]="true"/>
        </div>
      </section>
      <div class="drawer">
        <ng-container [ngTemplateOutlet]="drawer"></ng-container>
      </div>
    </div>
    <div class="flex gap-2">
      <section class="one-minute-bg">
        <div>
          <label>‚Ä¢ 1 –ú–∏–Ω—É—Ç</label>
          <div class="flex items-center space-between gap-2">
            <h2>–ú–∏–Ω—É—Ç—Ç–∞–π —É—Ä–∞–ª–¥–∞—Ö</h2>
            <h1 class="p-2 yellow-back">‚ö°Ô∏è</h1>
          </div>
          <div class="b-actions">
            <p-button routerLink="/typing" [queryParams]="{timer: 'on'}" label="–≠—Ö–ª—ç—Ö" severity="contrast"
                      [rounded]="true"/>
          </div>
        </div>
      </section>

      <section class="one-on-one-bg">
        <div>
          <label>‚Ä¢ 1x1</label>
          <div class="flex items-center space-between gap-2">
            <h2>–•–æ–æ—Ä–æ–Ω–¥–æ–æ ”©—Ä—Å”©–ª–¥”©—Ö</h2>
            <h1 class="p-2 silver-back">ü•äÔ∏è</h1>
          </div>
          <div class="b-actions">
            <p-button label="“Æ“Ø—Å–≥—ç—Ö" severity="contrast" [rounded]="true"/>
            <p-button label="–•–æ–ª–±–æ–≥–¥–æ—Ö" severity="contrast" [rounded]="true" variant="outlined"/>
          </div>
        </div>
      </section>
    </div>
  </main>
  <footer>
    <code class="small">
      Copyright ¬© 2026
    </code>

    <code class="small">
      –±–∏—á..—á|
    </code>
  </footer>
</div>

<ng-template #drawer>
  <div>
    <p-accordion value="0">
      <p-accordion-panel value="0">
        <p-accordion-header>
          <ng-template #toggleicon let-active="active">
            @if (active) {
              <ng-container [ngTemplateOutlet]="lessonProgress" [ngTemplateOutletContext]="{ $implicit: 30 }"/><i
                class="pi pi-minus"></i>
            } @else {
              <ng-container [ngTemplateOutlet]="lessonProgress" [ngTemplateOutletContext]="{ $implicit: 30 }"/><i
                class="pi pi-plus"></i>
            }
          </ng-template>
          <div class="flex items-center gap-2 w-full">
            <span class="font-bold whitespace-nowrap">Starter</span>
            <p-badge value="3" class="ml-auto mr-2"/>
          </div>
        </p-accordion-header>
        <p-accordion-content>
          <ng-container [ngTemplateOutlet]="table"/>
        </p-accordion-content>
      </p-accordion-panel>
      <p-accordion-panel value="1">
        <p-accordion-header>
          <ng-template #toggleicon let-active="active">
            @if (active) {
              <ng-container [ngTemplateOutlet]="lessonProgress" [ngTemplateOutletContext]="{ $implicit: 56 }"/><i
                class="pi pi-minus"></i>
            } @else {
              <ng-container [ngTemplateOutlet]="lessonProgress" [ngTemplateOutletContext]="{ $implicit: 56 }"/><i
                class="pi pi-plus"></i>
            }
          </ng-template>
          <div class="flex items-center gap-2 w-full">
            <span class="font-bold whitespace-nowrap">Intermediate</span>
            <p-badge value="4" class="ml-auto mr-2"/>
          </div>
        </p-accordion-header>
        <p-accordion-content>
          <ng-container [ngTemplateOutlet]="table"/>
        </p-accordion-content>
      </p-accordion-panel>
      <p-accordion-panel value="2">
        <p-accordion-header>
          <ng-template #toggleicon let-active="active">
            @if (active) {
              <ng-container [ngTemplateOutlet]="lessonProgress" [ngTemplateOutletContext]="{ $implicit: 0 }"/><i
                class="pi pi-minus"></i>
            } @else {
              <ng-container [ngTemplateOutlet]="lessonProgress" [ngTemplateOutletContext]="{ $implicit: 0 }"/><i
                class="pi pi-plus"></i>
            }
          </ng-template>
          <div class="flex items-center gap-2 w-full">
            <span class="font-bold whitespace-nowrap">Advanced</span>
            <p-badge value="2" class="ml-auto mr-2 "/>
          </div>
        </p-accordion-header>
        <p-accordion-content>
          <ng-container [ngTemplateOutlet]="table"/>
        </p-accordion-content>
      </p-accordion-panel>
    </p-accordion>

  </div>
</ng-template>

<ng-template #lessonProgress let-progress>
  <div class="lesson-progress">
    <p-progressbar [style]="{ height: '8px' }" [value]="progress">
      <ng-template #content let-value>
        <!--                  <span>{{value}}/100</span>-->
      </ng-template>
    </p-progressbar>
  </div>
</ng-template>

<ng-template #table>
  <div class="no-bg-table">
    @for (product of products; track product) {
      <div role="row" class="flex items-center gap-2 w-full p-2">
        <div class="flex flex-1">{{ product.name }}</div>

        <div class="b-actions">
          @if (product.progress > 0) {
              <p-tag severity="info">WPM: {{ product.wpm }}</p-tag>
              <small>–û–Ω–æ–≤—á: </small>
              <app-progress [label]="product.accuracy + ''" [value]="product.accuracy"/>
              <small>–Ø–≤—Ü: </small>
              <app-progress [label]="product.progress + ''" [value]="product.progress"/>
          } @else {
            <p-tag severity="secondary">–•–∏—á—ç—ç–ª: 8</p-tag>
            <small>–Ø–≤—Ü: </small>
            <app-progress [label]="'0'" [value]="0"/>
          }
        </div>
        <div class="last-col">
          <div class="b-actions">
            @if (product.progress > 0) {
              <p-button icon="pi pi-arrow-right" severity="primary" rounded="true" />
            } @else {
              <p-button variant="outlined" severity="contrast" rounded="true" label="–≠—Ö–ª“Ø“Ø–ª—ç—Ö"/>
            }
          </div>
        </div>
      </div>
    }
  </div>
</ng-template>
